## Настройки для producer:

- Использование разных ключей (key) → гарантирует, что сообщения с одинаковым ключом пойдут в одну партицию.
- Высокая надежность → acks=all-1, retries=5, max.in.flight.requests=1
- Высокая производительность → acks=0, compression.type=zstd, linger.ms=50
  
## Настройки для consumer:

fetch.min.bytes. Минимальный размер пакета сообщений перед получением. 1 (немедленная доставка) или 10000+ (меньше запросов).
max.poll.records. Количество сообщений за один вызов poll(). 500-1000 для высокой производительности.

Фиксация offset сообщения в consumer(enable.auto.commit):
Логи, метрики, события, где можно потерять данные -	true.
Биллинг, финансы, транзакционные системы - false, ручной commitSync().
Очереди задач, где потеря или дублирование нежелательны - false, ручной commitSync().

гарантия доставки:


Минимальная задержка → fetch.min.bytes=1, fetch.max.wait.ms=50
Эффективная обработка больших данных → fetch.min.bytes=100000, max.poll.records=1000
Защита от дублирования сообщений → enable.auto.commit=false, явное сохранение оффсетов


## Я отправляю измерения:
- если счетчик отправляет их раз в день, то терять нельзя, вдруг он сломался.(тем более раз в месяц). Нужна высокая надежность, настройки такие:
- producer:
    acks=all-1, retries=5

- consumer:
    fetch.min.bytes. = стандарт
    max.poll.records. = 500-1000
    enable.auto.commit = false, ручной commitSync()

- если счетчик отправляет их раз в минуту, то потерять можно. Нужна высокая производительность, настройки такие:
- producer:
    acks=all-1, retries=5


- consumer:
    fetch.min.bytes. = 10000
    max.poll.records. = 500-1000
    enable.auto.commit = true

## Дополнительная очередь для сломанных сообщений:


## Настройки топика:

- log.retention.ms



https://habr.com/ru/articles/853652/ подробная статья по настройке kafka


Счет — номер счета (или абонентского договора)
Сер.номер — серийный номер счетчика газа
Установленное давление/текущее давление газа(тоже с температурой)
Состояние(не выходит на связь, нажата кнопка, открыта крышка, неисправность датчика..)
Время — дата и время последнего сеанса связи с счетчиком газа (при добавлении в бд назначается)
V,m3 — объем газа, измеренный счетчиком
Т работы,ч — время работы счетчика газа